{% extends 'base.html.twig' %}

{% block title %}
	{{ trick.title }}
{% endblock %}


{% block importmap %}
	{{ importmap(['app', 'add-trick']) }}
{% endblock %}

{% block body %}


	<h1 class="mt-2 fw-light">{{ trick.title }}</h1>
	<hr>
	<div class="wrap_show_admin">
		<div class="wrap_admin_show_img">
			<img src="{{ vich_uploader_asset(trick, 'imageFile') }}" alt="{{ trick.imageName }}" width="500px"/></span>
	</div>
	<div>
		<ul>
			<li>
				l'auteur :
				{{ trick.user.username }}</li>
			<li>La catégorie :
				{{ trick.categorie.name  }}</li>
			<li>Date de création :
				{{ trick.createdAt|date("d/m/Y") }}</li>
			<li>

				La moyenne de l'astuce :
				{% if trick.average is null %}
					<strong>
						Pas de note</strong>
				{% else %}
					<strong>{{trick.average}}/5</strong>
				{% endif %}


			</li>


		</ul>

		<!-- Button trigger modal -->

		{#{% if (app.user is not null or trick.user != app.user) or (app.user is not null) %}#}
		{% if ((trick.user != app.user and app.user is not null )) %}
			<button type="button" class="btn btn-primary ms-2" data-bs-toggle="modal" data-bs-target="#exampleModal">
				Noter l'astuce
			</button>


		{% endif %}


	</div>
</div>
{#  nl2br : permet de prendre en compte les saut de lignes #}
<div class="mb-4">{{ trick.content|nl2br  }}</div>


<hr>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">
					Noter l'astuce</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				{{ form_start(formRating) }}
				<div class="form-group">
					{{   form_label(formRating.note ) }}
					{{   form_widget(formRating.note) }}
					<div class="form-error">
						{{ form_errors(formRating.note) }}

					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary mt-4" data-bs-dismiss="modal">fermer</button>

				{{   form_label(formRating.submit ) }}
				{{   form_widget(formRating.submit) }}

				{{ form_end(formRating) }}
			</div>
		</div>
	</div>
</div>


{#	{{   form(formRating ) }}#}


<div class=" mt-4 row d-flex">
	<div class="col-md-12 col-lg-10 col-xl-8">
		<div class="card">
			<div class="card-body">
				<div class="d-flex flex-start align-items-center">

					<img src="{{ vich_uploader_asset(trick.user, 'imageFile') }}" alt="avatar" class="rounded-circle shadow-1-strong me-3" width="60" height="60">
					<div>
						<h6 class="fw-bold text-primary mb-1">{{ trick.user.username }}</h6>
						<p class="text-muted small mb-0">
							Le
							{{ trick.createdAt|date("d/m/Y") }}
						</p>
					</div>
				</div>

				<p class="mt-3 mb-4 pb-2">
					Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																															              tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																															              quis nostrud exercitation ullamco laboris nisi ut aliquip consequat.
				</p>
				{#
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							<div class="small d-flex justify-content-start">
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								<a href="#!" class="d-flex align-items-center me-3">
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<i class="far fa-thumbs-up me-2"></i>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<p class="mb-0">Like</p>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								</a>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								<a href="#!" class="d-flex align-items-center me-3">
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<i class="far fa-comment-dots me-2"></i>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<p class="mb-0">Comment</p>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								</a>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								<a href="#!" class="d-flex align-items-center me-3">
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<i class="fas fa-share me-2"></i>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																									<p class="mb-0">Share</p>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																								</a>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																							</div>
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		
																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																		                    #}
			</div>
			<div class="card-footer py-3 border-0">
				<div class="d-flex flex-start w-100">
					<img class="rounded-circle shadow-1-strong me-3" src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(19).webp" alt="avatar" width="40" height="40"/>
					<div data-mdb-input-init class="form-outline w-100">
						<textarea class="form-control" id="textAreaExample" rows="4"></textarea>
						<label class="form-label" for="textAreaExample">Message</label>
					</div>
				</div>
				<div class="float-end mt-2 pt-1">
					<button type="button" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-sm">Poster le commentaire</button>

				</div>
			</div>
		</div>
	</div>
</div>{% endblock %}
